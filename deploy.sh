################################################## Build #####################################################
npm install
npm run build
################################################################################################################

###################################### Cloudformation Execution Role ############################################
PARAM_FILE="src/aws/cdk-stack-param.json"
CFN_EXECUTION_ROLE=$(cat $PARAM_FILE | jq -r '.CFN_EXECUTION_ROLE')
echo $CFN_EXECUTION_ROLE
##################################################################################################################

############################################## CDK Bootstrap & Deploy ############################################
cdk bootstrap

cdk synth -r $CFN_EXECUTION_ROLE

cdk diff -r $CFN_EXECUTION_ROLE

cdk deploy \* -r $CFN_EXECUTION_ROLE --require-approval never
###################################################################################################################